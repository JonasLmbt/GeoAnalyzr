{
  "$schema": "./semantic.schema.json",
  "schemaVersion": "0.1.0",

  "grains": ["session", "game", "round"],

  "datasets": {
    "session": {
      "primaryKey": ["sessionId"],
      "timeField": "sessionStartTs"
    },
    "game": {
      "primaryKey": ["gameId"],
      "timeField": "ts"
    },
    "round": {
      "primaryKey": ["gameId", "roundNumber"],
      "timeField": "ts"
    }
  },

  "settings": {
    "sessionGapMinutesDefault": 45
  },

    "dimensions": {
      "time_day": {
        "label": "Date",
        "kind": "time",
        "grain": ["round", "game"],
        "ordered": true,
        "allowedCharts": ["line", "bar"],
        "sortModes": ["chronological"]
      },
      "weekday": {
        "label": "Weekday",
        "kind": "category",
        "grain": ["round", "game"],
        "ordered": true,
        "allowedCharts": ["bar"],
        "sortModes": ["chronological", "asc", "desc"]
      },
      "hour": {
        "label": "Hour of day",
        "kind": "category",
        "grain": ["round", "game"],
        "ordered": true,
        "allowedCharts": ["bar"],
        "sortModes": ["chronological", "asc", "desc"]
      },
    "session_index": {
      "label": "Session #",
      "kind": "category",
      "grain": "session",
      "ordered": true,
      "allowedCharts": ["bar", "line"],
      "sortModes": ["chronological", "asc", "desc"]
    },
    "session_start": {
      "label": "Session start",
      "kind": "category",
      "grain": "session",
      "ordered": true,
      "allowedCharts": ["bar", "line"],
      "sortModes": ["chronological", "asc", "desc"]
    },
    "game_mode": {
      "label": "Game mode",
      "kind": "category",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 10 }
    },
    "mode_family": {
      "label": "Mode",
      "kind": "category",
      "grain": ["game", "round"],
      "allowedCharts": ["bar", "line"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 10 }
    },
    "result": {
      "label": "Result",
      "kind": "category",
      "grain": "game",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 5 }
    },
    "game_length": {
      "label": "Game length (rounds)",
      "kind": "category",
      "grain": "game",
      "ordered": true,
      "allowedCharts": ["bar"],
      "sortModes": ["chronological", "asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 30 }
    },
    "opponent_country": {
      "label": "Opponent country",
      "kind": "category",
      "grain": "game",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 30 }
    },
    "opponent_name": {
      "label": "Opponent",
      "kind": "category",
      "grain": "game",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 30, "selectorRequired": true }
    },

    "round_number": {
      "label": "Round #",
      "kind": "category",
      "grain": "round",
      "ordered": true,
      "allowedCharts": ["bar"],
      "sortModes": ["chronological", "asc", "desc"]
    },
    "round_id": {
      "label": "Round",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 200, "selectorRequired": true }
    },
    "true_country": {
      "label": "True country",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 12, "selectorRequired": true }
    },
    "teammate_name": {
      "label": "Teammate",
      "kind": "category",
      "grain": ["round", "game"],
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 15, "selectorRequired": true }
    },
    "movement_type": {
      "label": "Movement",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 8 }
    },
    "game_id": {
      "label": "Game",
      "kind": "category",
      "grain": ["round", "game"],
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 50, "selectorRequired": true }
    },
    "is_hit": {
      "label": "Hit?",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 2 }
    },
    "is_throw": {
      "label": "Throw?",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 2 }
    },
    "is_damage_dealt": {
      "label": "Damage dealt?",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 2 }
    },
    "is_damage_taken": {
      "label": "Damage taken?",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 2 }
    },
    "is_near_perfect": {
      "label": "Near-perfect? (>=4500)",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 2 }
    },
    "is_low_score": {
      "label": "Low score? (<500)",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 2 }
    },
    "duration_bucket": {
      "label": "Guess duration bucket",
      "kind": "category",
      "grain": "round",
      "ordered": true,
      "allowedCharts": ["bar"],
      "sortModes": ["chronological", "asc", "desc"]
    },
    "confused_countries": {
      "label": "Confused countries",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 80, "selectorRequired": true }
    },
    "guess_country": {
      "label": "Guessed country",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "large", "maxSeries": 20, "selectorRequired": true }
    },
    "score_bucket": {
      "label": "Score bucket",
      "kind": "category",
      "grain": "round",
      "ordered": true,
      "allowedCharts": ["bar"],
      "sortModes": ["chronological"]
    }
    ,
    "team_closer_winner": {
      "label": "Closer guesses",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 3 }
    },
    "team_higher_score_winner": {
      "label": "Higher score rounds",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 3 }
    },
    "team_fewer_throw_winner": {
      "label": "Fewer throws (<50)",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 3 }
    },
    "team_more_5k_winner": {
      "label": "More 5k rounds",
      "kind": "category",
      "grain": "round",
      "allowedCharts": ["bar"],
      "sortModes": ["asc", "desc"],
      "cardinality": { "policy": "small", "maxSeries": 3 }
    }
  },

  "measures": {
    "games_count": {
      "label": "Games",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_games"
    },
    "matchups_count": {
      "label": "Match-ups",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_games"
    },
    "strongest_opponent_rating": {
      "label": "Strongest opponent (rating)",
      "unit": "rating",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_opponent_start_rating"
    },
    "strongest_defeated_opponent_rating": {
      "label": "Strongest defeated opponent (rating)",
      "unit": "rating",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_defeated_opponent_start_rating"
    },
    "unique_opponents_count": {
      "label": "Unique opponents",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_distinct_opponent_name"
    },
    "unique_opponent_countries_count": {
      "label": "Unique countries",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_distinct_opponent_country"
    },
    "avg_game_length": {
      "label": "Avg game length",
      "unit": "float",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_game_length_rounds"
    },
    "rounds_count": {
      "label": "Rounds",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_rounds"
    },
    "games_distinct_count": {
      "label": "Games",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_distinct_game_id"
    },
    "first_played_at": {
      "label": "First game together",
      "unit": "datetime",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "min_played_at_ts"
    },
    "last_played_at": {
      "label": "Most recent game together",
      "unit": "datetime",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_played_at_ts"
    },
    "score_spread": {
      "label": "Score spread",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar"],
      "formulaId": "spread_player_self_score",
      "range": { "min": 0, "max": 5000 }
    },

    "avg_score": {
      "label": "Avg score",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_player_self_score",
      "range": { "min": 0, "max": 5000 }
    },
    "avg_score_hit_only": {
      "label": "Avg score (hit only)",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_player_self_score_hit_only",
      "range": { "min": 0, "max": 5000 }
    },
    "avg_distance_km": {
      "label": "Avg distance",
      "unit": "km",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_player_self_distance_km",
      "range": { "min": 0 }
    },
    "avg_guess_duration": {
      "label": "Avg guess duration",
      "unit": "seconds",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_duration_seconds",
      "range": { "min": 0 }
    },
    "fivek_rate": {
      "label": "5k rate",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "rate_player_self_score_eq_5000",
      "range": { "min": 0, "max": 100 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "score_bucket", "op": "eq", "value": "5000" }]
      }
    },
    "fivek_count": {
      "label": "5k count",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_5k_round",
      "range": { "min": 0},
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "score_bucket", "op": "eq", "value": "5000" }]
      }
    },
    "near_perfect_rate": {
      "label": "Near-perfect rate (>=4500)",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "rate_near_perfect_round",
      "range": { "min": 0, "max": 100 }
    },
    "near_perfect_count": {
      "label": "Near-perfect count (>=4500)",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_near_perfect_round",
      "range": { "min": 0}
    },
    "low_score_rate": {
      "label": "Low score rate (<500)",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "rate_low_score_round",
      "range": { "min": 0, "max": 100 }
    },
    "low_score_count": {
      "label": "Low score count (<500)",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_low_score_round",
      "range": { "min": 0}
    },

    "win_rate": {
      "label": "Win rate",
      "unit": "percent",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "rate_player_self_win",
      "range": { "min": 0, "max": 100 }
    },
    "win_count": {
      "label": "Win count",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_win_game",
      "range": { "min": 0 }
    },
    "games_with_result_count": {
      "label": "Games with result data",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_games_with_result",
      "range": { "min": 0 }
    },
    "loss_count": {
      "label": "Loss count",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_loss_game",
      "range": { "min": 0 }
    },
    "tie_count": {
      "label": "Tie count",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_tie_game",
      "range": { "min": 0 }
    },
    "end_rating": {
      "label": "End rating",
      "unit": "rating",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "last_player_self_end_rating",
      "timeDayFill": "carry_forward",
      "range": { "min": 0 }
    },
    "rating_trend": {
      "label": "Trend",
      "unit": "rating_delta",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "trend_player_self_rating"
    },
    "best_end_rating": {
      "label": "Best rating",
      "unit": "rating",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_player_self_end_rating"
    },
    "rating_delta_avg": {
      "label": "Avg rating delta",
      "unit": "rating_delta",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_player_self_rating_delta"
    },
    "longest_win_streak": {
      "label": "Longest win streak",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_win_streak"
    },
    "longest_loss_streak": {
      "label": "Longest loss streak",
      "unit": "count",
      "grain": "game",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_loss_streak"
    },

    "hit_rate": {
      "label": "Hit rate",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "rate_true_country_hit",
      "range": { "min": 0, "max": 100 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "is_hit", "op": "eq", "value": "true" }]
      }
    },
    "hit_count": {
      "label": "Hit count",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_hit_round",
      "range": { "min": 0 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "is_hit", "op": "eq", "value": "true" }]
      }
    },
    "throw_rate": {
      "label": "Throw rate",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "rate_throw_round",
      "range": { "min": 0, "max": 100 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "is_throw", "op": "eq", "value": "true" }]
      }
    },
    "throw_count": {
      "label": "Throw count",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_throw_round",
      "range": { "min": 0 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "is_throw", "op": "eq", "value": "true" }]
      }
    },
    "score_median": {
      "label": "Median score",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "median_player_self_score",
      "range": { "min": 0, "max": 5000 }
    },
    "score_stddev": {
      "label": "Score Std Dev",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "stddev_player_self_score",
      "range": { "min": 0, "max": 5000 }
    },
    "distance_median_km": {
      "label": "Median distance",
      "unit": "km",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "median_player_self_distance_km",
      "range": { "min": 0 }
    },
    "guess_duration_median": {
      "label": "Median guess duration",
      "unit": "seconds",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "median_duration_seconds",
      "range": { "min": 0 }
    },
    "rounds_with_time_count": {
      "label": "Rounds with time data",
      "unit": "count",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_rounds_with_duration",
      "range": { "min": 0 }
    },
    "time_played_seconds": {
      "label": "Time played",
      "unit": "duration",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "sum_duration_seconds"
    },

    "damage_dealt_avg": {
      "label": "Avg damage dealt",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_damage_dealt",
      "range": { "min": 0, "max": 5000 }
    },
    "damage_taken_avg": {
      "label": "Avg damage taken",
      "unit": "points",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_damage_taken",
      "range": { "min": 0, "max": 5000 }
    },
    "damage_dealt_share": {
      "label": "Damage dealt share",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "share_damage_dealt",
      "range": { "min": 0, "max": 100 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "is_damage_dealt", "op": "eq", "value": "true" }]
      }
    },
    "damage_taken_share": {
      "label": "Damage taken share",
      "unit": "percent",
      "grain": "round",
      "allowedCharts": ["bar", "line"],
      "formulaId": "share_damage_taken",
      "range": { "min": 0, "max": 100 },
      "drilldown": {
        "filterFromPoint": true,
        "extraFilters": [{ "dimension": "is_damage_taken", "op": "eq", "value": "true" }]
      }
    }
    ,
    "sessions_count": {
      "label": "Sessions",
      "unit": "count",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "count_sessions",
      "range": { "min": 0 }
    },
    "sessions_longest_break_seconds": {
      "label": "Longest break between sessions",
      "unit": "duration",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "max_break_between_sessions_seconds"
    },
    "sessions_avg_games": {
      "label": "Avg games per session",
      "unit": "float",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "mean_games_per_session"
    },
    "session_games_count": {
      "label": "Games",
      "unit": "count",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_games_count"
    },
    "session_rounds_count": {
      "label": "Rounds",
      "unit": "count",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_rounds_count"
    },
    "session_avg_score": {
      "label": "Avg score",
      "unit": "points",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_avg_score",
      "range": { "min": 0, "max": 5000 }
    },
    "session_avg_guess_duration": {
      "label": "Avg guess duration",
      "unit": "seconds",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_avg_guess_duration"
    },
    "session_avg_distance_km": {
      "label": "Avg distance",
      "unit": "km",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_avg_distance_km"
    },
    "session_fivek_rate": {
      "label": "5k rate",
      "unit": "percent",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_fivek_rate"
    },
    "session_hit_rate": {
      "label": "Hit rate",
      "unit": "percent",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_hit_rate"
    },
    "session_throw_rate": {
      "label": "Throw rate",
      "unit": "percent",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_throw_rate"
    },
    "session_delta_rating": {
      "label": "Session rating delta",
      "unit": "rating_delta",
      "grain": "session",
      "allowedCharts": ["bar", "line"],
      "formulaId": "session_delta_rating"
    }
  },

  "units": {
    "count": { "format": "int" },
    "points": { "format": "float", "decimals": 1 },
    "percent": { "format": "percent", "decimals": 1 },
    "seconds": { "format": "float", "decimals": 1 },
    "duration": { "format": "duration" },
    "datetime": { "format": "datetime" },
    "rating": { "format": "float", "decimals": 0 },
    "rating_delta": { "format": "float", "decimals": 0, "showSign": true },
    "km": { "format": "float", "decimals": 1 },
    "float": { "format": "float", "decimals": 2 }
  },

  "columnAliases": {
    "ts": ["playedAt", "startTime"],
    "game_mode": ["gameMode", "gameModeSimple", "game_mode", "mode", "gameType"],
    "true_country": ["trueCountry", "true_country"],
    "player_self_country": ["player_self_guessCountry", "p1_guessCountry", "guessCountry"],
    "player_self_score": ["player_self_score", "p1_score", "score"],
    "player_opponent_name": ["player_opponent_name", "playerTwoName", "playerOpponentName"],
    "player_opponent_id": ["player_opponent_id", "playerTwoId", "playerOpponentId"],
    "player_opponent_mate_name": ["player_opponent_mate_name", "teamTwoPlayerTwoName", "playerOpponentMateName"],
    "player_opponent_mate_id": ["player_opponent_mate_id", "teamTwoPlayerTwoId", "playerOpponentMateId"],
    "player_mate_name": ["player_mate_name", "teamOnePlayerTwoName", "playerMateName"],
    "player_mate_id": ["player_mate_id", "teamOnePlayerTwoId", "playerMateId"],
    "player_self_guessLat": ["p1_guessLat", "player_self_guessLat"],
    "player_self_guessLng": ["p1_guessLng", "player_self_guessLng"],
    "player_self_isBestGuess": ["p1_isBestGuess", "player_self_isBestGuess"],
    "player_mate_guessLat": ["p2_guessLat", "player_mate_guessLat"],
    "player_mate_guessLng": ["p2_guessLng", "player_mate_guessLng"],
    "player_mate_score": ["p2_score", "player_mate_score"],
    "player_mate_isBestGuess": ["p2_isBestGuess", "player_mate_isBestGuess"],
    "player_opponent_guessLat": ["p3_guessLat", "player_opponent_guessLat", "p2_guessLat"],
    "player_opponent_guessLng": ["p3_guessLng", "player_opponent_guessLng", "p2_guessLng"],
    "player_opponent_score": ["p3_score", "player_opponent_score", "p2_score"],
    "player_opponent_isBestGuess": ["p3_isBestGuess", "player_opponent_isBestGuess", "p2_isBestGuess"],
    "player_opponent_mate_guessLat": ["p4_guessLat", "player_opponent_mate_guessLat"],
    "player_opponent_mate_guessLng": ["p4_guessLng", "player_opponent_mate_guessLng"],
    "player_opponent_mate_score": ["p4_score", "player_opponent_mate_score"],
    "player_opponent_mate_isBestGuess": ["p4_isBestGuess", "player_opponent_mate_isBestGuess"],
    "distanceKm": ["player_self_distanceKm", "p1_distanceKm", "distanceKm"],
    "durationSeconds": ["durationSeconds", "guessDurationSec", "timeSec"]
  },

  "drilldownPresets": {
    "rounds": {
      "entity": "round",
      "columnsPresets": {
        "roundMode": [
          { "key": "ts", "label": "Date", "sortable": true },
          { "key": "result", "label": "Result", "sortable": true, "colored": true },
          { "key": "roundNumber", "label": "Round", "sortable": true },
          { "key": "movementType", "label": "Movement", "sortable": true },
          { "key": "player_self_score", "label": "Score", "sortable": true },
          { "key": "true_country", "label": "Country", "sortable": true },
          { "key": "durationSeconds", "label": "Guess Duration", "sortable": true },
          { "key": "damage", "label": "Damage", "sortable": true, "colored": true },
          { "key": "teammateName", "label": "Mate", "sortable": true },
          { "key": "gameId", "label": "Game", "sortable": true, "display": { "truncate": true, "truncateHead": 8 } },
          { "key": "guess_maps", "label": "Guess Maps", "type": "link", "link": { "kind": "guess_maps", "label": "Open" } },
          { "key": "street_view", "label": "True Street View", "type": "link", "link": { "kind": "street_view", "label": "Open" } }
        ]
      },
      "defaultPreset": "roundMode"
    },
    "games": {
      "entity": "game",
      "columnsPresets": {
        "gameMode": [
          { "key": "ts", "label": "Date", "sortable": true },
          { "key": "modeFamily", "label": "Game Mode", "sortable": true },
          { "key": "movementType", "label": "Movement", "sortable": true },
          { "key": "roundsCount", "label": "Game Length", "sortable": true },
          { "key": "result", "label": "Result", "sortable": true, "colored": true },
          { "key": "endRating", "label": "End Rating", "sortable": true },
          { "key": "ratingDelta", "label": "Rating Delta", "sortable": true, "colored": true },
          { "key": "gameId", "label": "Game", "sortable": true, "display": { "truncate": true, "truncateHead": 8 } }
        ]
      },
      "defaultPreset": "gameMode"
    },
    "players": {
      "entity": "game",
      "columnsPresets": {
        "opponentMode": [
          { "key": "ts", "label": "Date", "sortable": true },
          { "key": "modeFamily", "label": "Game Mode", "sortable": true },
          { "key": "movementType", "label": "Movement", "sortable": true },
          { "key": "roundsCount", "label": "Game Length", "sortable": true },
          { "key": "teammateName", "label": "Mate", "sortable": true },
          { "key": "result", "label": "Result", "sortable": true, "colored": true },
          { "key": "player_opponent_name", "label": "Opponent", "sortable": true },
          { "key": "player_opponent_mate_name", "label": "Opponent Mate", "sortable": true },
          { "key": "endRating", "label": "End Rating", "sortable": true },
          { "key": "ratingDelta", "label": "Rating Delta", "sortable": true, "colored": true },
          { "key": "gameId", "label": "Game", "sortable": true, "display": { "truncate": true, "truncateHead": 8 } }
        ]
      },
      "defaultPreset": "opponentMode"
    }
  },

  "errors": {
    "E_GRAIN_MISMATCH": "Selected fields have incompatible grains.",
    "E_CHART_X_NOT_ORDERED": "Line charts require an ordered x-dimension.",
    "E_SELECTOR_REQUIRED": "This dimension requires a selector (Top-N or Selected).",
    "E_TOO_MANY_SERIES": "Too many series requested; reduce categories or use selector."
  }
}
